- content_for :page_title, title

- if enrolled_courses.any?
  %h2= t('titles.courses.enrolled')
  .tile-container.flex-grid
    - enrolled_courses.each do |course|
      .tile.extended.stacked{ class: "tile-#{course.id}" }
        .tile-header
          = link_to progress_course_path(course) do
            = progress_for(course, current_user)
            %h1= course.name
            %small= t('lessons.progress', completed: course.lessons.completed.count, count: course.lessons.count)
        .tile-content
          .tile-meta
            %small Instructed by
            %h3= course.instructor.name
          %figure
            = user_avatar(course.instructor, class: 'avatar-default', alt: course.instructor.name, width: '45px', height: '45px')
        %p.ellipsis= course.short_description
        .tile-footer
          - if course.progress(current_user) != 100
            = link_to t('button.course.continue'), course_lesson_path(course, course.first_remaining_lesson_for(current_user)), class: 'button button-small'
          - else
            = link_to t('button.course.completed'), progress_course_path(course), class: 'button button-small'

- if accessible_courses.any?
  %h2= t('titles.courses.accessible')
  .tile-container.flex-grid
    - accessible_courses.each do |course|
      .tile.extended.stacked{ class: "tile-#{course.id}" }
        .tile-header
          = link_to course_path(course) do
            = progress_for(course, current_user)
            %h1= course.name
            %small= t('lessons.count', count: course.lessons.count)
        .tile-content
          .tile-meta
            %small Instructed by
            %h3= course.instructor.name
          %figure
            = user_avatar(course.instructor, class: 'avatar-default', alt: course.instructor.name, width: '45px', height: '45px')
        %p.ellipsis= course.short_description
        .tile-footer
          = render 'courses/button_enroll', resource: course

- else
  %h2= t('titles.courses.index')
  .tile-container.flex-grid
    - available_courses.each do |course|
      = render 'courses/course', course: course
